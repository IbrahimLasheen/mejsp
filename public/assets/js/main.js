$(document).ready(function(){let baseUrl=window.location.origin+'/';let apiUrl=baseUrl+'api/';let labelRequired=$(".required");for(let i=0;i<=labelRequired.length;i++){$(labelRequired[i]).append("<b class='text-danger font-weight-bold'> * </b>")}
$('.btn-search').click(function(e){e.preventDefault();$('body').append(`<div id="search-overlay" class=" d-flex justify-content-center align-items-center"> <button id="close-search"><i class="fa-solid fa-xmark"></i></button> <div class="box-white w-75"> <h4 class="mb-3 text-center">عن ماذا تبحث ؟</h4> <form action="${baseUrl + 'search'}"> <input type="text" name="q" class="form-control" required/> </form> </div></div>`);closeSearch()});function closeSearch(){$('#close-search').click(function(e){$("#search-overlay").remove()})}
closeSearch();$("#aside .open-menu").click(function(e){e.preventDefault();$("#aside #menu").slideToggle(300)});function confirmDelete(form,message="سوف يتم الحذف بمجرد الضغط علي موافق"){let submitButton=$(form+' button[type=submit]')
$(submitButton).click(function(e){e.preventDefault();$(submitButton).removeClass("delete-this-item");$(form).removeClass("form-this-item");$(this).addClass("delete-this-item");$(this).parents(form).addClass("form-this-item");swal({title:"هل انت متاكد ؟",text:message,icon:"warning",buttons:!0,dangerMode:!0,}).then((willDelete)=>{if(willDelete){$('.form-this-item').submit()}})})}
confirmDelete('.delete');let selectTypeOfConferences="#select-type-of-conferences",researchBox=".research-box",conferencesDetailsBox="#conferences-details";$(selectTypeOfConferences).change(function(e){let request={'id':$(this).val(),};$.post(apiUrl+'type-of-conferences',request,function(data,textStatus,jqXHR){$(researchBox).empty();$(conferencesDetailsBox+' .price').text(0);$(conferencesDetailsBox+' .price').text(data.price);if(data.without_research>0){$(researchBox).append(` <div class="form-group"> <label>عنوان البحث <b class="text-danger">*</b></label> <textarea name="research_title" class="form-control" required cols="30" rows="10" placeholder="تنويه يرجى كتابة البيانات التالية اسم المؤلف كامل، المسمى الأكاديمي إن وجد ، عنوان البحث المقدم للمؤتمر إن وجد"></textarea> </div>`)}},"json")});let selectSpecialty="#select-specialty",selectJournal="#select-journal",selectType="#select-type";$(selectType).change(function(e){e.preventDefault();$.post(apiUrl+'specialties/'+$(this).val(),function(data,textStatus){$(selectSpecialty).empty();if(textStatus=='success'){$(selectSpecialty).append(`<option disabled selected>اختر</option>`);$.each(data,function(index,row){$(selectSpecialty).append(`<option value="${row.id}">${row.specialty}</option>`)})}else{toastr.error('يوجد خطأ غير متوقع اثناء اختيارك نوع النشر الدولي الرجاء حاول مرة اخري')}},"json")});$(selectSpecialty).change(function(e){e.preventDefault();$.post(apiUrl+'journals/'+$(this).val(),function(data,textStatus){$(selectJournal).empty();if(textStatus=='success'){$(selectJournal).append(`<option disabled selected>اختر</option>`);$.each(data,function(index,row){$(selectJournal).append(`<option value="${row.id}">${row.name}</option>`)})}else{toastr.error('يوجد خطأ غير متوقع اثناء اختيارك نوع النشر الدولي الرجاء حاول مرة اخري')}},"json")});$(selectJournal).change(function(e){$.post(apiUrl+'journal-get-price/'+$(this).val(),function(data,textStatus,jqXHR){$(researchBox).empty();$(conferencesDetailsBox+' .price').text(0);$(conferencesDetailsBox+' .price').text(data.price)},"json")})})
