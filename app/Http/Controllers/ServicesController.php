<?php namespace App\Http\Controllers;use App\Models\Services;use Illuminate\Http\Request;class ServicesController extends Controller{const DEFAULT_ICON='<i class="fa-solid fa-exclamation"></i>';public function index(){$services=Services::orderBy("id",'DESC')->get();return view("admin.services.all",compact('services'));}public function create(){return view("admin.services.create");}
public function store(Request $request){

    $request->validate(["name"=>'required|max:255','icon'=>'max:255','link'=>'string']);
    $insert=Services::create(["name"=>$request->name,"icon"=>$request->icon,"link"=>$request->link]);if($request->show_in_chat){$insert->show_in_chat = true;$insert->save();}if($insert->save()){return response(['status'=>true,'message'=>'تم اضافة الخدمة بنجاح','form'=>'reset']);}}public function edit($id){$row=Services::find($id);if(!empty($row)){return view("admin.services.edit",compact('row'));}else{return redirect(adminUrl("services"));}}
    public function update(Request $request){$id=$request->id;$row=Services::find($id);if(!empty($row)){$request->validate(["name"=>'required|max:255','icon'=>'max:255','link'=>'string']);$row->name=$request->name;$row->link=$request->link;$row->icon=$request->icon;$row->show_in_chat =$request->show_in_chat ? true : false ; if($row->save()){return response(['status'=>true,'message'=>'تم تحديث البيانات بنجاح']);}}else{return response(['status'=>'notfound','message'=>'هذه البيانات ليست متاحه في النظام']);}}public function destroy(Request $request){$row=Services::find($request->id);if(!empty($row)){$row->delete();$request->session()->flash('successMessage','تم حذف البيانات بنجاح');return back();}return back();}public function show(){$services=Services::orderBy("id","DESC")->get();return view("main.services.all",compact('services'));}}