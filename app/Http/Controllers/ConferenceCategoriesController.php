<?php namespace App\Http\Controllers;use App\Models\ConferenceCategories;use App\Models\Conferences;use Illuminate\Http\Request;class ConferenceCategoriesController extends Controller{public function index(){$categories=ConferenceCategories::orderBy('id','DESC')->get();return view('admin.categories.all',compact('categories'));}public function store(Request $request){$request->validate(['name'=>'required|unique:conference_categories,name|max:150','price'=>'required|numeric|digits_between:2,8',],['name.required'=>'اسم الفئة مطلوب','name.unique'=>'لقد تم اضافة نفس الفئة من قبل','name.max'=>'يجب ان لا يتخطي النص 150 حرف','price.required'=>'سعر الفئة مطلوب',]);$without_research=$request->without_research=='on'?"1":"0";$insert=ConferenceCategories::create(['name'=>$request->name,'price'=>$request->price,"without_research"=>$without_research]);if($insert->save()){return response(['message'=>'تم الاضافة بنجاح','status'=>true]);}}public function update(Request $request,ConferenceCategories $categories){$id=$request->id;$name=$request->name;$price=$request->price;$request->validate(['name'=>'required|unique:conference_categories,name,'.$id.'|max:150',],['name.required'=>'اسم الفئة مطلوب','name.unique'=>'لقد تم اضافة نفس الفئة من قبل','name.max'=>'يجب ان لا يتخطي النص 150 حرف','price.required'=>'سعر الفئة مطلوب',]);$without_research=$request->without_research=='on'?"1":"0";$get=$categories::find($id);if(!empty($get)){$get->name=$name;$get->price=$price;$get->without_research=$without_research;if($get->save()){return response(['message'=>'تم التحديث بنجاح','status'=>true]);}}}public function destroy(Request $request){$id=$request->id;$get=ConferenceCategories::find($id);if(!empty($get)){$get->delete();return back();}return back();}public function conference_destroy(Request $request){$id=$request->id;$get=Conferences::find($id);if(!empty($get)){$get->delete();}return back();}}